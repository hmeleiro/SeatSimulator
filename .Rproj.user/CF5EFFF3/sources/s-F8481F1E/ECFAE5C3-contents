#
# This is a Shiny web application. You can run the application by clicking
# the 'Run App' button above.
#
# Find out more about building applications with Shiny here:
#
#    http://shiny.rstudio.com/
#

library(shiny)
library(tidyverse)
library(ggparliament)
require(electoral)
require(readxl)
require(DT)
require(shinythemes)
require(showtext)

font_add_google(name = "Source Sans Pro", family = "Source Sans Pro",
                regular.wt = 300, bold.wt = 700)
showtext_auto()
showtext_opts(dpi = 112)

provincias <- read_csv("data/votoprovincias26J.csv")
pond <- read_xlsx("data/ponderaciones encuestas.xlsx")
seats <- read_xlsx("data/26J_seats.xlsx")

cols <- c(1,2,3, 11,12,13,14,15)

provincias <- provincias[, cols]



x <- merge(provincias, seats[, c(1,3,4)], by.x = "CÃ³digo.de.Provincia", by.y = "code")


y <- merge(x, pond[, c(1,2,3)], by.x = "siglas", by.y = "partido")


write_csv(y, "data/data.csv")
